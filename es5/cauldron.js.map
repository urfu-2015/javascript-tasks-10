{"version":3,"sources":["../cauldron.js"],"names":[],"mappings":"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","file":"cauldron.js","sourcesContent":["'use strict';\n\n(function () {\n    /**\n    * Base class for Library, Formula, FormulaResult\n    * @constructor\n    */\n    function Common() {}\n    Common.prototype = {\n        /**\n        * @param {HTMLElement} element\n        * @returns {boolean}\n        */\n        isElementWithin: function (element) {\n            return this._container === element.parentElement;\n        },\n        /**\n        * @returns {boolean}\n        */\n        isContainerClear: function () {\n            return this._container.firstChild === null;\n        },\n        /**\n        * @param {HTMLElement} element\n        */\n        addElement: function (element) {\n            this._container.appendChild(element);\n        },\n        /**\n        * @param {HTMLElement} element\n        */\n        removeElement: function (element) {\n            this._container.removeChild(element);\n        },\n        /**\n        * remove all child elements\n        */\n        clearContainer: function () {\n            while (!this.isContainerClear()) {\n                this.removeElement(this._container.firstChild);\n            }\n        },\n        /**\n        * @returns {Array.<HTMLElement>}\n        */\n        getRenderedElements: function () {\n            return [].slice.apply(this._container.children);\n        },\n        /**\n        * @param {string} className\n        * @returns {Array.<string>}\n        */\n        getNamesRenderedElements: function (className) {\n            if (this.isContainerClear()) {\n                return [];\n            }\n            var renderedElements = this.getRenderedElements();\n            var names = renderedElements\n                .filter(item => {\n                    return item.classList.contains(className);\n                })\n                .map(item => item.dataset.element);\n            return names;\n        }\n    };\n\n    /**\n    * Singleton\n    */\n    var singletonLibrary = (function () {\n        /**\n        * List of available alchemical elements\n        * @constructor\n        */\n        var Library = function () {\n            this._container = document.querySelector('.library__elements');\n            this._elements = [];\n            this._onMouseWheel = this._onMouseWheel.bind(this);\n        };\n        /**\n        * Inherit from Common\n        */\n        Library.prototype = Object.create(Common.prototype);\n        Library.prototype.constructor = Library;\n\n        var library = {\n            /**\n            * @param {string} jsonUrl\n            */\n            loadInfo: function (jsonUrl) {\n                loadJSON(jsonUrl, function (loadedElements) {\n                    this._elements = loadedElements;\n                    this.renderElements();\n                    var mousewheelEvt = isFirefox() ? 'DOMMouseScroll' :\n                        'mousewheel';\n                    this._container.addEventListener(mousewheelEvt, this._onMouseWheel);\n                }.bind(this));\n            },\n            /**\n            * Render all elements with inLibrary flag\n            */\n            renderElements: function () {\n                var elementsFragment = document.createDocumentFragment();\n                this._elements\n                    .filter(item => item.inLibrary)\n                    .sort((a, b) => {\n                        return a.name > b.name ? 1 : -1;\n                    })\n                    .forEach(item => {\n                        var elem = new Element(item.name);\n                        elementsFragment.appendChild(elem.getElementNode());\n                        elem.loadImg(item.url);\n                    });\n                this._container.appendChild(elementsFragment);\n            },\n            /**\n            *\n            * @returns {Array|{index: number, input: string}|null}\n            */\n            getStyleTranslateY: function () {\n                return this._container.style.transform.match(/-?\\d+/);\n            },\n            resetScrollElements: function () {\n                this._container.style.transform = 'translateY(0px)';\n            },\n            /**\n            * @param {number} displacement\n            */\n            scrollElements: function (displacement) {\n                var translateY = this.getStyleTranslateY();\n                displacement = translateY ? Number(translateY[0]) + displacement : displacement;\n                this._container.style.transform = 'translateY(' + displacement + 'px)';\n            },\n            /**\n            * Find url on element which has got a name in func argument\n            * @param {string} name\n            * @returns {string|null}\n            */\n            getUrlByName: function (name) {\n                for (var i = 0; i < this._elements.length; i++) {\n                    if (this._elements[i].name === name) {\n                        break;\n                    }\n                }\n                return this._elements[i].url || null;\n            },\n            /**\n            * @param {HTMLElement} element\n            */\n            addElement: function (element) {\n                var renderedElements = this.getRenderedElements();\n                var i = 0;\n                while (renderedElements.length > i &&\n                    renderedElements[i].dataset.element < element.dataset.element) {\n                    i++;\n                }\n                this._container.insertBefore(element, renderedElements[i]);\n            },\n            /**\n            * Highlight name of the elements which match to the filter input\n            */\n            highlightElements: function () {\n                var filterVal = filter.getFilterValue();\n                var regExp = new RegExp('^(' + filterVal + ')', 'gi');\n                var renderedElements = this.getRenderedElements();\n                renderedElements.forEach(item => {\n                    if (!(item.dataset.element.search(regExp) + 1)) {\n                        item.classList.add('hidden');\n                    } else {\n                        item.classList.remove('hidden');\n                        var elementName = item.querySelector('.element__name');\n                        elementName.innerHTML = filterVal.length ?\n                            elementName.textContent.replace(regExp, '<b>$1</b>') :\n                            elementName.textContent;\n                    }\n                });\n            },\n            /**\n            * @returns {number}\n            */\n            getElementHeight: function () {\n                var renderedElements = this.getRenderedElements();\n                renderedElements = renderedElements.filter(item =>\n                    !item.classList.contains('hidden'));\n                return renderedElements[0].offsetHeight;\n            },\n            /**\n            * Event handler of mouse wheel\n            * @param {Event} event\n            * @private\n            */\n            _onMouseWheel: function (event) {\n                var elementHeight = this.getElementHeight();\n                var maxTop = filter.getHeight();\n                var libraryClientRect = this._container.getBoundingClientRect();\n                var delta = event.detail ? event.detail * (-SCROLL_SIZE) : event.wheelDelta;\n\n                if (delta > 0) {\n                    if (maxTop <= libraryClientRect.top) {\n                        return;\n                    }\n                    maxTop > libraryClientRect.top + elementHeight ?\n                        this.scrollElements(elementHeight) :\n                        this.scrollElements(maxTop - libraryClientRect.top);\n                    return;\n                }\n                if (window.innerHeight >= libraryClientRect.bottom) {\n                    return;\n                }\n                window.innerHeight < libraryClientRect.bottom - elementHeight ?\n                    this.scrollElements(-elementHeight) :\n                    this.scrollElements(window.innerHeight - libraryClientRect.bottom);\n            }\n        };\n\n        assignIn(Library.prototype, library);\n\n        var instance;\n        return {\n            getInstance: function () {\n                if (!instance) {\n                    instance = new Library();\n                }\n                return instance;\n            }\n        };\n    })();\n\n    /**\n    * Singleton\n    */\n    var singletonFormula = (function () {\n        /**\n        * @constructor\n        */\n        var Formula = function () {\n            this._container = document.querySelector('.workspace__formula');\n            this._minFormulaLength = Infinity;\n            this._formulas = [];\n        };\n        /**\n        * Inherit from Common\n        */\n        Formula.prototype = Object.create(Common.prototype);\n        Formula.prototype.constructor = Formula;\n\n        var formula = {\n            /**\n            * @param {string} jsonUrl\n            */\n            loadInfo: function (jsonUrl) {\n                loadJSON(jsonUrl, function (loadedFormulas) {\n                    this._formulas = loadedFormulas;\n                    loadedFormulas.forEach(item => {\n                        this._minFormulaLength = Math.min(this._minFormulaLength,\n                            item.elements.length);\n                    });\n                }.bind(this));\n            },\n            /**\n            * @param {HTMLElement} element\n            */\n            addElement: function (element) {\n                if (!this._container.childElementCount) {\n                    Common.prototype.addElement.call(this, element);\n                    this.calculate();\n                    return;\n                }\n                var plus = document.createElement('span');\n                plus.classList.add('workspace__formula-plus');\n                Common.prototype.addElement.call(this, plus);\n                Common.prototype.addElement.call(this, element);\n                this.calculate();\n            },\n            /**\n            * @param {HTMLElement} element\n            */\n            removeElement: function (element) {\n                if (this._container.childElementCount < 2) {\n                    Common.prototype.removeElement.call(this, element);\n                    this.calculate();\n                    return;\n                }\n                Common.prototype.removeElement.call(this, element);\n                this.removeRedundantPluses();\n            },\n            /**\n            * Remove spare pluses between elements or on the edges\n            */\n            removeRedundantPluses: function () {\n                var pluses = this.getRenderedElements();\n                pluses\n                    .filter(item => item.classList.contains('workspace__formula-plus'))\n                    .forEach(item => {\n                        if (item === this._container.firstElementChild ||\n                            item === this._container.lastElementChild ||\n                            item.className === item.nextElementSibling.className) {\n                            this._container.removeChild(item);\n                        }\n                    });\n                this.calculate();\n            },\n            /**\n            * Calculate formula and display the result\n            */\n            calculate: function () {\n                var elementsNames = this.getNamesRenderedElements('element');\n                if (elementsNames.length < this._minFormulaLength) {\n                    this.resetFormulaResult();\n                    return;\n                }\n\n                var formulas = this.getAppropriateFormulas(elementsNames.length);\n                var resultName = null;\n                for (var i = 0; i < formulas.length; i++) {\n                    var answ = elementsNames.every(item => {\n                        return formulas[i].elements.indexOf(item) + 1;\n                    });\n                    if (answ) {\n                        resultName = formulas[i].result;\n                        break;\n                    }\n                }\n\n                if (!resultName) {\n                    this.resetFormulaResult();\n                    return;\n                }\n\n                this.setFormulaResult(resultName);\n            },\n            /**\n            * @param {string} elementName\n            */\n            setFormulaResult: function (elementName) {\n                var elem = new Element(elementName);\n                formulaRes.setResultElement(elem.getElementNode());\n                var url = library.getUrlByName(elementName);\n                elem.loadImg(url);\n            },\n            /**\n            *\n            * @param formulaLength\n            * @returns {Array|Array.<Object>}\n            */\n            getAppropriateFormulas: function (formulaLength) {\n                return this._formulas\n                    .filter(item => item.elements.length === formulaLength);\n            },\n            resetFormulaResult: function () {\n                formulaRes.clearContainer();\n                formulaRes.reset();\n            }\n        };\n\n        assignIn(Formula.prototype, formula);\n\n        var instance;\n        return {\n            getInstance: function () {\n                if (!instance) {\n                    instance = new Formula();\n                }\n                return instance;\n            }\n        };\n    })();\n\n    /**\n    * Singleton\n    */\n    var singletonFormulaResult = (function () {\n        /**\n        * @constructor\n        */\n        var FormulaResult = function () {\n            this._container = document.querySelector('.workspace__result');\n            this._resultElement = null;\n        };\n        /**\n        * Inherit from Common\n        */\n        FormulaResult.prototype = Object.create(Common.prototype);\n        FormulaResult.prototype.constructor = FormulaResult;\n\n        var formulaResult = {\n            /**\n            * Come back to default\n            */\n            reset: function () {\n                this._resultElement = null;\n            },\n            /**\n            * @returns {HTMLElement|null}\n            */\n            getResultElement: function () {\n                return this._resultElement;\n            },\n            /**\n            * @param {HTMLElement} element\n            */\n            setResultElement: function (element) {\n                if (!this.getResultElement()) {\n                    this.addElement(element);\n                } else {\n                    this._container.replaceChild(element, this._resultElement);\n                }\n                this._resultElement = element;\n            },\n            /**\n            * @param {HTMLElement} element\n            */\n            addElement: function (element) {\n                if (this.isContainerClear()) {\n                    var arrow = document.createElement('span');\n                    arrow.classList.add('workspace__result-arrow');\n                    Common.prototype.addElement.call(this, arrow);\n                }\n                Common.prototype.addElement.call(this, element);\n            }\n        };\n\n        assignIn(FormulaResult.prototype, formulaResult);\n\n        var instance;\n        return {\n            getInstance: function () {\n                if (!instance) {\n                    instance = new FormulaResult();\n                }\n                return instance;\n            }\n        };\n    })();\n\n    /**\n    * @param {string} newName\n    * @constructor\n    */\n    var Element = function (newName) {\n        this._elementTemplate = document.getElementById('element-template');\n        this._element = this._elementTemplate.content.children[0].cloneNode(true);\n        this._elementName = this._element.querySelector('.element__name');\n        this._elementImg = this._element.querySelector('img');\n        this._elementName.textContent = newName;\n        this._element.dataset.element = newName;\n    };\n    Element.prototype = {\n        /**\n        * @param {string} url\n        */\n        loadImg: function (url) {\n            var img = new Image();\n            img.src = url;\n            img.classList.add('element__img');\n\n            img.addEventListener('load', () => {\n                this._element.replaceChild(img, this._elementImg);\n                this._elementImg = img;\n            });\n            img.addEventListener('error', () => {\n                this._elementImg.classList.add('element__img', 'img-load-failure');\n            });\n        },\n        /**\n        * @returns {HTMLElement}\n        */\n        getElementNode: function () {\n            return this._element;\n        }\n    };\n\n    /**\n    * Singleton\n    */\n    var singletonFilter = (function () {\n        /**\n        * @constructor\n        */\n        var Filter = function () {\n            this._filterInput = document.getElementById('filter');\n            this._filterClear = document.querySelector('.filter__clear');\n            this._onInputEnterText = this._onInputEnterText.bind(this);\n            this._onClearClick = this._onClearClick.bind(this);\n            this._filterInput.addEventListener('input', this._onInputEnterText);\n            this._filterClear.addEventListener('click', this._onClearClick);\n        };\n        Filter.prototype = {\n            /**\n            * @returns {number}\n            */\n            getHeight: function () {\n                var styles = window.getComputedStyle(this._filterInput.parentElement);\n                var margin = parseInt(styles.marginTop) + parseInt(styles.marginBottom);\n                return this._filterInput.offsetHeight + margin;\n            },\n            /**\n            * @returns {string}\n            */\n            getFilterValue: function () {\n                return this._filterInput.value;\n            },\n            /**\n            * @returns {boolean}\n            */\n            isFilterInputClear: function () {\n                return !this._filterInput.value.length;\n            },\n            /**\n            * Event handler of input any symbol in input area\n            * @private\n            */\n            _onInputEnterText: function () {\n                this._filterInput.value.length ? this._filterClear.classList.remove('hidden') :\n                    this._filterClear.classList.add('hidden');\n                var libraryTranslateY = library.getStyleTranslateY();\n                if (libraryTranslateY && Number(libraryTranslateY[0]) !== 0) {\n                    library.resetScrollElements();\n                }\n                library.highlightElements();\n            },\n            /**\n            * Event handler of click on cross\n            * @param {Event} event\n            * @private\n            */\n            _onClearClick: function (event) {\n                event.preventDefault();\n                this._filterInput.value = '';\n                this._filterInput.dispatchEvent(new Event('input'));\n            }\n        };\n\n        var instance;\n        return {\n            getInstance: function () {\n                if (!instance) {\n                    instance = new Filter();\n                }\n                return instance;\n            }\n        };\n    })();\n\n    /**\n    * Singleton for drag and drop elements\n    */\n    var dragAndDrop = new function () {\n        var dragObj = {};\n        /**\n        * Event handler of hold down the left mouse button\n        * @param {Event} event\n        */\n        function onMouseDown(event) {\n            if (event.which !== 1) {\n                return;\n            }\n            dragObj.elementImg = event.target.closest('.element__img');\n            if (!dragObj.elementImg || dragObj.elementImg.closest('.workspace__result')) {\n                return;\n            }\n            dragObj.element = dragObj.elementImg.closest('.element');\n            dragObj.downX = event.pageX;\n            dragObj.downY = event.pageY;\n\n            event.preventDefault();\n        }\n        /**\n        * Event handler of moving a mouse\n        * @param {Event} event\n        */\n        function onMouseMove(event) {\n            if (!dragObj.element) {\n                return;\n            }\n            if (!dragObj.isDragStart) {\n                dragObj.lastNextSibling = dragObj.element.nextSibling;\n                dragObj.lastParent = dragObj.element.parentNode;\n                var moveX = event.pageX - dragObj.downX;\n                var moveY = event.pageY - dragObj.downY;\n                if (Math.abs(moveX) < 5 && Math.abs(moveY) < 5) {\n                    return;\n                }\n                var coords = getCoords(dragObj.element);\n                var prevImgSizes = getSizes(dragObj.elementImg);\n                dragObj.shiftX = dragObj.downX - coords.left;\n                dragObj.shiftY = dragObj.downY - coords.top;\n                startDrag();\n                var currImgSizes = getSizes(dragObj.elementImg);\n                if (currImgSizes.width !== prevImgSizes.width ||\n                    currImgSizes.height !== prevImgSizes.height) {\n                    dragObj.shiftX += (currImgSizes.width - prevImgSizes.width) / 2;\n                    dragObj.shiftY += (currImgSizes.height - prevImgSizes.height) / 2;\n                }\n            }\n            dragObj.element.style.left = event.pageX - dragObj.shiftX + 'px';\n            dragObj.element.style.top = event.pageY - dragObj.shiftY + 'px';\n\n            event.preventDefault();\n        }\n        /**\n        * Event handler of the end of hold left mouse button\n        * @param event\n        */\n        function onMouseUp(event) {\n            if (dragObj.isDragStart) {\n                finishDrag(event);\n            }\n            dragObj = {};\n        }\n        /**\n        * Beginning of the dragging element\n        */\n        function startDrag() {\n            if (isFirefox()) {\n                dragObj.element.classList.add('noclick');\n            }\n            dragObj.element.classList.add('element--drag');\n            dragObj.elementImg.classList.add('element__img--drag');\n            document.body.appendChild(dragObj.element);\n            dragObj.element.style.position = 'absolute';\n            dragObj.isDragStart = true;\n        }\n        /**\n        * Beginning of the end of the dragging element\n        * @param {Event} event\n        */\n        function finishDrag(event) {\n            dragObj.dropElem = findDroppable(event);\n            if (!dragObj.dropElem) {\n                rollback();\n            } else {\n                onDragEnd();\n            }\n        }\n        /**\n        * Cancel dragging and return element to the previous position\n        */\n        function rollback() {\n            dragObj.lastParent.insertBefore(dragObj.element, dragObj.lastNextSibling);\n            resetElementStyle();\n        }\n        /**\n        * The end of the dragging element\n        */\n        function onDragEnd() {\n            resetElementStyle();\n            var elementName = dragObj.element.querySelector('.element__name');\n            if (isLibraryParent()) {\n                if (elementName.getElementsByTagName('b')) {\n                    elementName.innerHTML = elementName.textContent;\n                }\n                formula.addElement(dragObj.element);\n                return;\n            }\n            formula.removeRedundantPluses();\n            library.addElement(dragObj.element);\n            if (!filter.isFilterInputClear()) {\n                library.highlightElements();\n            }\n        }\n\n        /**\n        * Find drop container\n        * @param {Event} event\n        * @returns {HTMLElement|null}\n        */\n        function findDroppable(event) {\n            dragObj.element.classList.add('hidden');\n            var elem = document.elementFromPoint(event.clientX, event.clientY);\n            dragObj.element.classList.remove('hidden');\n            if (elem === null) {\n                return null;\n            }\n            if (isLibraryParent()) {\n                return elem.closest('.workspace');\n            }\n            return elem.closest('.library');\n        }\n        function resetElementStyle() {\n            dragObj.element.classList.remove('element--drag');\n            dragObj.elementImg.classList.remove('element__img--drag');\n            dragObj.element.style.position = 'static';\n        }\n        /**\n        * @param {HTMLElement} elem\n        * @returns {{top: Number, left: Number}}\n        */\n        function getCoords(elem) {\n            var box = elem.getBoundingClientRect();\n            return {\n                top: box.top,\n                left: box.left\n            };\n        }\n        /**\n        * Returns sizes of the Image\n        * @param {HTMLElement} elem\n        * @returns {{width: Number, height: Number}}\n        */\n        function getSizes(elem) {\n            var styles = window.getComputedStyle(elem);\n            return {\n                width: parseInt(styles.width),\n                height: parseInt(styles.height)\n            };\n        }\n        /**\n        * @returns {boolean}\n        */\n        function isLibraryParent() {\n            return dragObj.lastParent.classList.contains('library__elements');\n        }\n        document.addEventListener('mousedown', onMouseDown);\n        document.addEventListener('mousemove', onMouseMove);\n        document.addEventListener('mouseup', onMouseUp);\n    };\n\n    /**\n    * @param {string} url\n    * @param {Function} callback\n    */\n    function loadJSON(url, callback) {\n        fetch(url)\n            .then(response => {\n                if (response.status >= 200 && response.status < 300) {\n                    return Promise.resolve(response.json());\n                } else {\n                    return Promise.reject(new Error(response.statusText));\n                }\n            })\n            .then(data => {\n                callback(data);\n            })\n            .catch(error => {\n                console.log(\"Failed\", error);\n            });\n    }\n\n    function initEvents() {\n        window.addEventListener('imgElementClick', function (event) {\n            var element = event.detail.element;\n            var elementName = element.querySelector('.element__name');\n            if (library.isElementWithin(element)) {\n                library.removeElement(element);\n                if (elementName.getElementsByTagName('b')) {\n                    elementName.innerHTML = elementName.textContent;\n                }\n                formula.addElement(element);\n            } else if (formula.isElementWithin(element)) {\n                formula.removeElement(element);\n                library.addElement(element);\n                if (!filter.isFilterInputClear()) {\n                    library.highlightElements();\n                }\n            }\n        });\n\n        var formulasClear = document.querySelector('.workspace__clear');\n        formulasClear.addEventListener('click', function (event) {\n            event.preventDefault();\n            var elementsInFormula = formula.getRenderedElements();\n            formula.clearContainer();\n            elementsInFormula.filter(item => {\n                return item.classList.contains('element');\n            })\n            .forEach(item => {\n                library.addElement(item);\n            });\n            if (!filter.isFilterInputClear()) {\n                library.highlightElements();\n            }\n        });\n\n        window.addEventListener('click', function (event) {\n            event.preventDefault();\n            if (!doesHaveParents(event.target, ['element__img', 'library__elements']) &&\n                !doesHaveParents(event.target, ['element__img', 'workspace__formula'])) {\n                return;\n            }\n\n            var parent = event.target.parentElement;\n            if (isFirefox() && parent.classList.contains('noclick')) {\n                parent.classList.remove('noclick');\n                return;\n            }\n            var imgClickEvent = new CustomEvent('imgElementClick',\n                { detail: { element: parent } });\n            window.dispatchEvent(imgClickEvent);\n        });\n    }\n\n    /**\n    * Check if element and his parent have all classes from classNamesArr\n    * @param {HTMLElement} element\n    * @param {Array} classNamesArr\n    * @returns {boolean}\n    */\n    function doesHaveParents(element, classNamesArr) {\n        if (!classNamesArr) {\n            return false;\n        }\n        var className = classNamesArr.shift();\n        do {\n            if (element.classList.contains(className)) {\n                return classNamesArr.length ? doesHaveParents(element, classNamesArr) : true;\n            }\n            element = element.parentElement;\n        } while (element);\n        return false;\n    }\n\n    /**\n    * For MouseWheel -> DOMMouseScroll and for DragAndDrop. Triggered events in the following order:\n    * in Chrome: mousedown -> mouseup (without click)\n    * in Firefox: mousedown -> mouseup -> click\n    * @returns {boolean}\n    */\n    function isFirefox() {\n        return /Firefox/i.test(navigator.userAgent);\n    }\n\n\n    /**\n    * @param {Object} object\n    * @param {Object} source\n    * @returns {Object}\n    */\n    function assignIn(object, source) {\n        var props = Object.keys(source);\n        while (props.length) {\n            var key = props.shift();\n            object[key] = source[key];\n        }\n        return object;\n    }\n\n\n    initEvents();\n    var SCROLL_SIZE = 120;\n    var library = singletonLibrary.getInstance();\n    var formula = singletonFormula.getInstance();\n    var formulaRes = singletonFormulaResult.getInstance();\n    library.loadInfo('elements.json');\n    formula.loadInfo('formulas.json');\n    var filter = singletonFilter.getInstance();\n})();\n"]}